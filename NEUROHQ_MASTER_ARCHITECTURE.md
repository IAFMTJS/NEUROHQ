# NEUROHQ -- MASTER ARCHITECTURE DOCUMENT

## Version 1.0

Where this document conflicts with **NEUROHQ_ULTRA_MASTER_SPEC.md**, the Ultra Master Spec is authoritative.

------------------------------------------------------------------------

# 1. PRODUCT DEFINITION

NEUROHQ is a nervous-system-aware personal operating system built as a
Progressive Web App (PWA). It is calendar-based, mood-adaptive,
execution-focused, and structured for ADHD/autism optimization.

Core pillars: - Adaptive execution - Energy budgeting - Financial
control - Structured learning - Quarterly identity planning -
Philosophical reinforcement - Calendar integration - Pattern analysis

------------------------------------------------------------------------

# 2. SYSTEM LAYERS

1.  Authentication Layer
2.  Task Execution Engine
3.  Mood & Energy Adaptive Engine
4.  Energy Budget Engine
5.  Financial System
6.  Learning & Education System
7.  Quarterly Strategy System
8.  Philosophy Engine (365 Quotes)
9.  Calendar Integration Layer
10. Reporting & Pattern Analysis
11. Admin & Feature Flags
12. Deployment & Infrastructure

------------------------------------------------------------------------

# 3. CORE LOGIC SUMMARY

## 3.1 Task Rollover

-   Runs daily at 00:00 via cron
-   Moves unfinished tasks to current day
-   Increments carry_over_count
-   ≥3 triggers avoidance notice
-   ≥5 triggers Stabilize Mode

## 3.2 Mood Adaptive Engine

Inputs: - energy (1--10) - focus (1--10) - sensory_load (1--10) -
sleep_hours - social_load

Modes:

LOW ENERGY (≤4): - Max 3 visible tasks - Hide heavy tasks (energy_required ≥ 7)

HIGH SENSORY (≥7): - Minimal UI - Reduced push

DRIVEN MODE (≥7 energy & focus): - Prioritize high impact tasks (priority ≥ 4) - Bonus
focus block enabled

STABILIZE MODE: - Only 2 tasks visible - Block new task creation

------------------------------------------------------------------------

## 3.3 Energy Budget System

Daily capacity: 100

Task cost = energy_required × 10\
Calendar cost = duration_hours × 15\
Social multiplier ×1.5

Display remaining capacity visually.

------------------------------------------------------------------------

## 3.4 Quarterly System

Each quarter: - Primary theme - Secondary theme - Savings goal -
Identity statement

Quarter reset via cron.

------------------------------------------------------------------------

## 3.5 Savings System

Tracks: - Target - Current - Weekly required - Impulse spending
detection - 24h freeze option - Alternative suggestions

------------------------------------------------------------------------

## 3.6 Learning System

Weekly: 60 minutes\
Monthly: 1 book

Tracks: - Minutes - Completion % - Streak

------------------------------------------------------------------------

## 3.7 Education Decision Tracker

Clarity score: (interest_score + future_value_score) - effort_score

------------------------------------------------------------------------

## 3.8 Philosophy Engine

Daily quote mapping: quote_id = day_of_year(current_date)

Push configurable (morning/evening).

------------------------------------------------------------------------

## 3.9 Calendar Integration

Phase 1: - Google OAuth (read-only)

Phase 2: - Two-way sync - External calendar priority

------------------------------------------------------------------------

# 3.10 TIMEZONE & CRON

- User timezone stored per user (IANA, e.g. Europe/Amsterdam).
- "Today" and daily rollover use the user's local date.
- Cron: run rollover / quote dispatch for each user when it is 00:00 in their timezone (e.g. hourly cron checks which users have crossed midnight).
- MVP option: single app timezone (e.g. UTC) and add per-user timezone in a later iteration.

------------------------------------------------------------------------

# 3.11 REALITY REPORT (WEEKLY)

Content: - Tasks completed vs planned - Learning minutes (vs 60 min target) - Savings progress - Mood/energy summary - Carry-over count.
Channel: in-app page (primary); optional email or push summary later.
Generated by weekly cron; stored or computed on demand.

------------------------------------------------------------------------

# 4. PUSH NOTIFICATIONS

Types: - Daily quote - Avoidance alert - Weekly learning reminder -
Savings alert - Shutdown reminder

Max 3 per day.

------------------------------------------------------------------------

END OF MASTER ARCHITECTURE
