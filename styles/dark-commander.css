/**
 * DARK COMMANDER DESIGN SYSTEM v2.0 – Cinematic Game UI
 * Single light source, controlled glow, tactical panel aesthetic.
 * Use with data-ui="dark-commander" or .dc scope.
 */

/* ========== 1. DESIGN TOKENS (Stap 1 – exact tokens from New UI Display Idea) ========== */
[data-ui="dark-commander"],
.dc {
  --dc-bg-top: var(--bg-main);
  --dc-bg-bottom: var(--bg-elevated);
  --dc-bg-main: var(--bg-main);
  --dc-bg-elevated: var(--bg-elevated);
  --dc-bg-card: var(--bg-card);
  --dc-bg-mascot-container: var(--bg-main);

  --dc-radial-mascot: rgba(37, 99, 235, 0.12);

  --dc-accent-primary: var(--accent-primary);
  --dc-accent-primary-dark: var(--accent-primary-dark);
  --dc-accent-cyan: var(--accent-cyan);
  --dc-accent-amber: var(--accent-amber);

  --dc-text-main: var(--text-main);
  --dc-text-soft: var(--text-soft);

  --dc-border-soft: var(--border-soft);

  --dc-glow-inner-cyan: rgba(34, 211, 238, 0.2);
  --dc-glow-inner-blue: rgba(37, 99, 235, 0.2);
  --dc-glow-inner-amber: rgba(245, 158, 11, 0.2);

  --dc-shadow-card: var(--shadow-card);
  --dc-shadow-button: var(--shadow-button);
}

/* ========== 2. CONTAINER & LAYOUT ========== */
.dc-container {
  padding: 24px;
  padding-bottom: 100px;
  display: flex;
  flex-direction: column;
  gap: 24px;
  background: linear-gradient(180deg, var(--dc-bg-top) 0%, var(--dc-bg-bottom) 100%);
  min-height: 100vh;
  max-width: 420px;
  margin: 0 auto;
}

@media (max-width: 375px) {
  .dc-container {
    padding: 20px;
    padding-bottom: 90px;
  }
}

/* ========== 3. TACTICAL PANEL CARD (HUD module style) ========== */
.dc-card {
  background: var(--dc-bg-card);
  border-radius: 18px;
  padding: 20px;
  border: 1px solid var(--dc-border-soft);
  box-shadow: var(--dc-shadow-card);
  position: relative;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  /* No persistent glow */
}

.dc-card::before {
  content: "";
  position: absolute;
  top: 0;
  left: 20%;
  width: 60%;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--dc-accent-primary), transparent);
  border-radius: 18px 18px 0 0;
}

.dc-card::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: radial-gradient(ellipse 80% 40% at 50% 0%, rgba(255, 255, 255, 0.03), transparent 50%);
  pointer-events: none;
}

.dc-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--dc-shadow-card), 0 0 20px rgba(37, 99, 235, 0.12);
}

/* ========== 4. PRIMARY BUTTON (wins over global .btn-primary / neon styles) ========== */
.dc-primary-btn,
[data-ui="dark-commander"] .dc-primary-btn,
[data-ui="dark-commander"] a.dc-primary-btn {
  background: linear-gradient(180deg, #2563EB, #1D4ED8) !important;
  border-radius: 14px;
  padding: 16px;
  color: #fff !important;
  font-weight: 600;
  border: none !important;
  box-shadow: var(--dc-shadow-button) !important;
  transition: transform 0.2s ease, filter 0.2s ease;
  cursor: pointer;
  width: 100%;
  min-height: 52px;
  font-size: 16px;
  text-decoration: none !important;
  appearance: none;
}

.dc-primary-btn:hover,
[data-ui="dark-commander"] a.dc-primary-btn:hover {
  transform: translateY(-2px);
  filter: brightness(1.08);
  background: linear-gradient(180deg, #2563EB, #1D4ED8) !important;
  box-shadow: var(--dc-shadow-button) !important;
}

.dc-primary-btn:active,
[data-ui="dark-commander"] a.dc-primary-btn:active {
  transform: scale(0.98);
}

/* BEGIN MISSION in ActiveMissionCard: use same tactical primary style (no neon/HDR) */
[data-ui="dark-commander"] .mission-hdr-wrap {
  max-width: 100%;
  padding: 0;
  background: linear-gradient(180deg, #2563EB, #1D4ED8) !important;
  border-radius: 14px;
  box-shadow: var(--dc-shadow-button) !important;
  transition: transform 0.2s ease, filter 0.2s ease;
}

[data-ui="dark-commander"] .mission-hdr-wrap:hover {
  transform: translateY(-2px);
  filter: brightness(1.08);
  box-shadow: var(--dc-shadow-button) !important;
}

[data-ui="dark-commander"] .mission-hdr-wrap:active {
  transform: scale(0.98);
}

[data-ui="dark-commander"] .mission-hdr-button {
  min-height: 52px;
  border-radius: 14px;
  background: transparent !important;
  padding: 16px 24px;
}

[data-ui="dark-commander"] .mission-hdr-button:hover,
[data-ui="dark-commander"] .mission-hdr-button:active {
  transform: none;
}

[data-ui="dark-commander"] .mission-hdr-canvas {
  display: none !important;
}

[data-ui="dark-commander"] .mission-hdr-label {
  color: #fff !important;
  text-shadow: none;
  font-weight: 600;
  font-size: 16px;
}

/* ========== 5. STAT RINGS (inner glow only per stat) ========== */
.dc-stat-ring {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.dc-stat-ring.energy {
  background: conic-gradient(var(--dc-accent-cyan) 0% var(--dc-stat-energy, 82%), rgba(255, 255, 255, 0.05) var(--dc-stat-energy, 82%) 100%);
}

.dc-stat-ring.focus {
  background: conic-gradient(var(--dc-accent-primary) 0% var(--dc-stat-focus, 65%), rgba(255, 255, 255, 0.05) var(--dc-stat-focus, 65%) 100%);
}

.dc-stat-ring.load {
  background: conic-gradient(var(--dc-accent-amber) 0% var(--dc-stat-load, 30%), rgba(255, 255, 255, 0.05) var(--dc-stat-load, 30%) 100%);
}

.dc-stat-inner {
  width: 75px;
  height: 75px;
  background: var(--dc-bg-top);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 14px;
  color: var(--dc-text-main);
}

/* Inner glow only: Energy cyan, Focus blue, Load amber. No outer glow. */
.dc-stat-ring.energy .dc-stat-inner {
  box-shadow: inset 0 0 20px var(--dc-glow-inner-cyan);
}

.dc-stat-ring.focus .dc-stat-inner {
  box-shadow: inset 0 0 20px var(--dc-glow-inner-blue);
}

.dc-stat-ring.load .dc-stat-inner {
  box-shadow: inset 0 0 20px var(--dc-glow-inner-amber);
}

@media (max-width: 375px) {
  .dc-stat-ring {
    width: 85px;
    height: 85px;
  }
  .dc-stat-inner {
    width: 65px;
    height: 65px;
    font-size: 13px;
  }
}

/* ========== 6. PROGRESS BAR ========== */
.dc-progress {
  height: 6px;
  background: rgba(255, 255, 255, 0.06);
  border-radius: 10px;
  overflow: hidden;
}

.dc-progress-fill {
  height: 100%;
  background: var(--dc-accent-primary);
  border-radius: 10px;
  transition: width 0.3s ease;
}

/* ========== 7. MISSION CARD (Stap 3) ========== */
.dc-mission-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

@media (max-width: 375px) {
  .dc-mission-grid {
    grid-template-columns: 1fr;
  }
}

.dc-mission-card {
  background: var(--dc-bg-card);
  border-radius: 18px;
  padding: 20px;
  border: 1px solid var(--dc-border-soft);
  box-shadow: var(--dc-shadow-card);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  min-height: 120px;
  position: relative;
}

.dc-mission-card::before {
  content: "";
  position: absolute;
  top: 0;
  left: 20%;
  width: 60%;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--dc-accent-primary), transparent);
  border-radius: 18px 18px 0 0;
}

.dc-mission-card h3 {
  margin: 0 0 4px 0;
  font-size: 18px;
  font-weight: 600;
  color: var(--dc-text-main);
}

.dc-mission-card .dc-text-soft {
  font-size: 13px;
  color: var(--dc-text-soft);
  margin: 0;
}

.dc-mission-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--dc-shadow-card), 0 0 20px rgba(37, 99, 235, 0.12);
}

.dc-mission-card.active {
  border: 1px solid var(--dc-accent-primary);
  box-shadow: var(--dc-shadow-card), 0 0 0 1px rgba(37, 99, 235, 0.2);
}

.dc-mission-card.locked {
  opacity: 0.5;
}

.dc-mission-card.completed {
  border: 1px solid var(--dc-accent-cyan);
}

.dc-mission-card.completed::after {
  content: "✓";
  position: absolute;
  top: 12px;
  right: 16px;
  color: var(--dc-accent-cyan);
  font-weight: bold;
  font-size: 18px;
}

/* ========== 8. SKILL TREE (Stap 5) ========== */
.dc-skill-tree {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  gap: 24px;
  margin-top: 24px;
  flex-wrap: wrap;
}

.dc-skill-node {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  background: var(--dc-bg-card);
  border: 1px solid var(--dc-border-soft);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--dc-shadow-card);
  transition: transform 0.2s ease;
}

.dc-skill-node .dc-node-inner {
  font-size: 13px;
  text-align: center;
  color: var(--dc-text-main);
  font-weight: 500;
}

.dc-skill-node.unlocked {
  border: 1px solid var(--dc-accent-primary);
  box-shadow: var(--dc-shadow-card), inset 0 0 16px var(--dc-glow-inner-blue);
}

.dc-skill-node.unlocked:hover {
  transform: scale(1.05);
}

.dc-skill-node.locked {
  opacity: 0.4;
}

.dc-skill-connector {
  width: 40px;
  height: 4px;
  min-height: 4px;
  border-radius: 2px;
  background: var(--dc-border-soft);
}

.dc-skill-node.unlocked + .dc-skill-connector {
  background: var(--dc-accent-primary);
  box-shadow: 0 0 8px var(--dc-glow-primary, rgba(37, 99, 235, 0.35));
}

@media (max-width: 360px) {
  .dc-skill-node {
    width: 100px;
    height: 100px;
  }
  .dc-skill-node .dc-node-inner {
    font-size: 12px;
  }
  .dc-skill-connector {
    height: 30px;
  }
}

/* ========== 9. MASCOT PANEL – square only to enhance hero; can go lower/off-screen; barely visible ========== */
.dc-mascot-card {
  display: flex;
  justify-content: center;
  align-items: flex-end;
  padding: 0 16px 0;
  margin-bottom: -8vh;
  background: rgba(5, 8, 16, 0.2);
  position: relative;
  overflow: visible;
  border: none;
  border-radius: 0;
  box-shadow: none;
  min-height: 0;
}

/* Feet right above page name: pull title block up so h1 sits directly under mascot feet */
.dc-mascot-card + .dc-header-title {
  margin-top: -4rem;
  padding-top: 0.25rem;
}

/* Wrapper: big so hero is huge; aligned bottom so mascot sits lower; square can extend up/off-screen */
.dc-mascot-wrapper {
  position: relative;
  z-index: 1;
  width: clamp(280px, 92vw, 480px);
  height: clamp(320px, 72vh, 520px);
  max-width: 100%;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  background: transparent;
  border-radius: 0;
  overflow: visible;
  border: none;
  box-shadow: none;
}

/* Glow around the hero only: drop-shadow follows the PNG outline (head, jacket, etc.) */
.dc-mascot-wrapper img {
  width: 100% !important;
  height: 100% !important;
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  object-position: center bottom;
  /* Soft halo + cyan rim – both follow the mascot shape, not a box */
  filter:
    drop-shadow(0 0 32px rgba(147, 197, 253, 0.2))
    drop-shadow(0 0 16px rgba(59, 130, 246, 0.15))
    drop-shadow(0 0 8px rgba(34, 211, 238, 0.25));
}

/* ========== 10. TYPOGRAPHY ========== */
.dc h1 {
  font-size: 28px;
  font-weight: 600;
  margin: 0;
  color: var(--dc-text-main);
}

.dc h2 {
  font-size: 22px;
  font-weight: 600;
  color: var(--dc-text-main);
}

.dc h3 {
  font-size: 18px;
  font-weight: 600;
  color: var(--dc-text-main);
}

.dc-text-soft {
  color: var(--dc-text-soft);
  font-size: 13px;
}

/* ========== 11. PAGE ENTER (Stap 4) ========== */
.dc-page {
  animation: dc-pageEnter 0.25s ease;
}

@keyframes dc-pageEnter {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ========== 13. BOTTOM NAV (dark panel, primary blue active, no glow rings) ========== */
[data-ui="dark-commander"] .bottom-nav {
  background: var(--dc-bg-elevated);
  border-top: 1px solid var(--dc-border-soft);
  box-shadow: 0 -4px 16px rgba(0, 0, 0, 0.25);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

[data-ui="dark-commander"] .bottom-nav .nav-item-active {
  color: var(--dc-accent-primary);
}

[data-ui="dark-commander"] .bottom-nav .nav-item-active .nav-item-inner {
  background: rgba(37, 99, 235, 0.12);
  border: 1px solid rgba(37, 99, 235, 0.25);
  box-shadow: none;
}

[data-ui="dark-commander"] .bottom-nav .nav-item-active .nav-item-inner::after {
  display: none;
}

[data-ui="dark-commander"] .bottom-nav .nav-item-active .nav-item-inner .nav-icon-wrap,
[data-ui="dark-commander"] .bottom-nav .nav-item-active .nav-item-inner .nav-icon-wrap svg {
  filter: none;
}

[data-ui="dark-commander"] .bottom-nav a:not(.nav-item-active) {
  color: var(--dc-text-soft);
}

/* ========== 14. MAIN CONTENT BACKGROUND (transparent – body cinematic background shows) ========== */
[data-ui="dark-commander"] {
  background: transparent;
}

[data-ui="dark-commander"] main {
  background: transparent;
}

@media (prefers-reduced-motion: reduce) {
  .dc-page {
    animation: none;
  }
}

/* ========== 12. SECTION TITLE BAR (Stap 8) ========== */
.dc-section-title {
  position: relative;
  padding-left: 12px;
}

.dc-section-title::before {
  content: "";
  position: absolute;
  left: 0;
  top: 50%;
  width: 4px;
  height: 60%;
  background: var(--dc-accent-primary);
  transform: translateY(-50%);
  border-radius: 4px;
}
